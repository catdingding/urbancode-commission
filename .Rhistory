Sys.which("pdftotext")
Sys.which("pdftotext")
setwd("E:/SkyDrive/GitHub/urbancode-commission")
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div",xmlValue)
library(bitops)
library(RCurl)
library(XML)
Sys.setlocale(category='LC_ALL', locale='C')
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div",xmlValue)
get_url<-getURL("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038")
get_url_parse<-htmlParse(get_url)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div",xmlValue)
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/div")
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/div",xmalValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/div",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/div",xmlAttrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div",xmlAttrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div",xmlValue)
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/div")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")[1:3]
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")[2:3]
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")[2:4]
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")[1:10]
get_url<-getURL("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038", encoding="utf-8")
get_url_parse<-htmlParse(get_url,encoding="utf-8")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")[1:10]
get_url<-getURL("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038", encoding="big5")
get_url_parse<-htmlParse(get_url,encoding="big5")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")[1:10]
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")
getNodeSet(get_url_parse,"//form[@name='fdownload'])
getNodeSet(get_url_parse,"//form[@name='fdownload']")
get_url<-getURL("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038", encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']")
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlAttrs)
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/a")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr")
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/a",xmlEventParse)
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/a",xmlChildren)
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/a",xmlCDataNode)
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/a",xmlAttributeType)
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlCleanNamespaces)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlAttributeType)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlElementSummary)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlGetAttr)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlName)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlNamespace)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlName)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlAttrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xml)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue("都委會會議記錄"))
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue(都委會會議記錄))
test<-"都委會會議記錄"
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue(test))
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue())
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue
)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue,"都委會會議記錄")
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue,"")
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlTreeParse)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlTree)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlToList)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlToDataFrame)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlToList)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",`xmlNamespaces<-`)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlNamespaces)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlSchemaValidate)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/td[@class='font-2']")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/td")
getNodeSet(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']")
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",Attrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlAttrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",attr)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",attributes)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlAttributes)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlAttrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)[8]
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)[6]
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)[4]
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)[1]
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)[1:3]
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)[2]
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
value_parse
value_parse[seq(2,length(value_parse),8)]
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a",xmlAttrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlChildren)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlChildren)
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlChildren)$text
value_parse[seq(2,length(value_parse),8)]
value_parse[seq(3,length(value_parse),8)]
value_parse[seq(4,length(value_parse),8)]
file_name<-value_parse[seq(2,length(value_parse),8)]
file_type<-value_parse[seq(4,length(value_parse),8)]
xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a",xmlAttrs)
test<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a",xmlAttrs)
test<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)
test
head(test)
head(test[1,])
head(test[2,])
head(test[1,])
test<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
test
link<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
data.frame(file_name,link,file_type)
head(data.frame(file_name,link,file_type))
head(data.frame(name=file_name,link=link,type=file_type))
link_list<-data.frame(name=file_name,link=link,type=file_type)
View(link_list)
link<-paste("http://www.planning.ntpc.gov.tw",link,sep="")
link
link_list<-data.frame(name=file_name,link=link,type=file_type)
View(link_list)
source("npup_parse1.R")
source("npup.R")
npup_parse1()
source("npup.R")
npup_parse1()
source("npup.R")
npup_parse1()
for (i in 1:16) {
url<-paste("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038&enpage=",i,sep="")
get_url<-getURL(url, encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
file_name<-value_parse[seq(2,length(value_parse),8)]
file_type<-value_parse[seq(4,length(value_parse),8)]
link<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
link<-paste("http://www.planning.ntpc.gov.tw",link,sep="")
list<-data.frame(name=file_name,link=link,type=file_type)
link_list<-rbind(link_list,list)
library(bitops)
library(RCurl)
library(XML)
Sys.setlocale(category='LC_ALL', locale='C')
link_list<-c()
for (i in 1:16) {
url<-paste("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038&enpage=",i,sep="")
get_url<-getURL(url, encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
file_name<-value_parse[seq(2,length(value_parse),8)]
file_type<-value_parse[seq(4,length(value_parse),8)]
link<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
link<-paste("http://www.planning.ntpc.gov.tw",link,sep="")
list<-data.frame(name=file_name,link=link,type=file_type)
link_list<-rbind(link_list,list)
library(bitops)
library(RCurl)
library(XML)
Sys.setlocale(category='LC_ALL', locale='C')
link_list<-c()
for (i in 1:16) {
url<-paste("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038&enpage=",i,sep="")
get_url<-getURL(url, encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
file_name<-value_parse[seq(2,length(value_parse),8)]
file_type<-value_parse[seq(4,length(value_parse),8)]
link<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
link<-paste("http://www.planning.ntpc.gov.tw",link,sep="")
list<-data.frame(name=file_name,link=link,type=file_type)
link_list<-rbind(link_list,list)
}
View(link_list)
link_list
link_list[,1]
Encoding<(link_list[,1])
Encoding(link_list[,1])
Encoding(link_list[1,1])
link_list[1,1]
?data.frame
url<-paste("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038&enpage=",i,sep="")
get_url<-getURL(url, encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
file_name<-value_parse[seq(2,length(value_parse),8)]
file_type<-value_parse[seq(4,length(value_parse),8)]
link<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
link<-paste("http://www.planning.ntpc.gov.tw",link,sep="")
list<-data.frame(name=file_name,link=link,type=file_type,stringAsFactors=FALSE)
link_list<-rbind(link_list,list)
source("npup.R")
npup_parse1()
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
file_name<-value_parse[seq(2,length(value_parse),8)]
file_type<-value_parse[seq(4,length(value_parse),8)]
file_name
Encoding(file_name)
iconv(file_name,"utf-8","big5")
source("npup.R")
npup_parse1()
link_list<-c()
for (i in 1:16) {
url<-paste("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038&enpage=",i,sep="")
get_url<-getURL(url, encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
file_name<-iconv(value_parse[seq(2,length(value_parse),8)],"utf-8","big5")
##iconv(file_name,"utf-8","big5")
file_type<-value_parse[seq(4,length(value_parse),8)]
link<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
link<-paste("http://www.planning.ntpc.gov.tw",link,sep="")
list<-data.frame(name=file_name,link=link,type=file_type,stringAsFactors=FALSE)
link_list<-rbind(link_list,list)
}
View(link_list)
link_list
link_list[,1]
file_name<-as.character(iconv(value_parse[seq(2,length(value_parse),8)],"utf-8","big5"))
link_list<-rbind(link_list,list)
link_list[,1]
file)name
file_name
calss(file_name)
class(file_name)
?data.frame
list<-data.frame(name=file_name,link=link,type=file_type,stringsAsFactors=FALSE)
class(list$list)
library(bitops)
library(RCurl)
library(XML)
Sys.setlocale(category='LC_ALL', locale='C')
link_list<-c()
for (i in 1:16) {
url<-paste("http://www.planning.ntpc.gov.tw/ap/fdownload/fdownload2.jsp?mfkind_id=00038&enpage=",i,sep="")
get_url<-getURL(url, encoding="utf-8")
get_url_parse<-htmlParse(get_url, encoding="utf-8")
value_parse<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td[@class='font-2']",xmlValue)
file_name<-as.character(iconv(value_parse[seq(2,length(value_parse),8)],"utf-8","big5"))
file_type<-value_parse[seq(4,length(value_parse),8)]
link<-xpathSApply(get_url_parse,"//form[@name='fdownload']/table/tr/td/table/tbody/tr/td/div/a[@href]",xmlAttrs)[1,]
link<-paste("http://www.planning.ntpc.gov.tw",link,sep="")
list<-data.frame(name=file_name,link=link,type=file_type,stringsAsFactors=FALSE)
link_list<-rbind(link_list,list)
}
class(list$list)
class(list[,1])
class(list[,2])
source("npup.R")
npup_parse1()
